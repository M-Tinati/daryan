{% extends "base.html" %}
{% block title %}سفارش‌های من{% endblock %}

{% block content %}
<section class="container mx-auto my-12 px-4 max-w-4xl">
  <h2 class="text-2xl font-bold mb-6 text-blue-700 text-center">سفارش‌های من</h2>

  {% if orders %}
    <div class="grid gap-6">
      {% for order in orders %}
        <div class="bg-white shadow-md rounded-xl p-4">
          <div class="flex justify-between items-center mb-2">
            <h3 class="font-semibold text-lg">سفارش #{{ order.id }}</h3>
            <span class="text-sm text-gray-500">{{ order.created_at|date:"Y-m-d H:i" }}</span>
          </div>
          <p class="text-sm"><strong>وضعیت:</strong> {{ order.get_status_display }}</p>
          <p class="text-sm"><strong>نام و نام خانوادگی:</strong> {{ order.full_name }}</p>
          <p class="text-sm"><strong>شماره تلفن:</strong> {{ order.phone }}</p>
          <p class="text-sm"><strong>کد ملی:</strong> {{ order.national_code }}</p>
          <p class="text-sm"><strong>آدرس:</strong> {{ order.address }}</p>

          <div class="mt-3">
            <h4 class="font-semibold text-sm mb-1">محصولات سفارش:</h4>
            <ul class="list-disc list-inside text-sm">
              {% for item in order.items.all %}
                <li>{{ item.product.name }} - تعداد: {{ item.quantity }} - متراژ: {{ item.length }} متر</li>
              {% endfor %}
            </ul>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-gray-500 mt-6">هیچ سفارشی ثبت نشده است.</p>
  {% endif %}
</section>
{% endblock %}
